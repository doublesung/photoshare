(function(t){function e(e){for(var i,l,n=e[0],r=e[1],d=e[2],u=0,h=[];u<n.length;u++)l=n[u],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&h.push(o[l][0]),o[l]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);c&&c(e);while(h.length)h.shift()();return a.push.apply(a,d||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,n=1;n<s.length;n++){var r=s[n];0!==o[r]&&(i=!1)}i&&(a.splice(e--,1),t=l(l.s=s[0]))}return t}var i={},o={app:0},a=[];function l(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=t,l.c=i,l.d=function(t,e,s){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(s,i,function(e){return t[e]}.bind(null,i));return s},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var d=0;d<n.length;d++)e(n[d]);var c=r;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"040e":function(t,e,s){},"0f00":function(t,e,s){},"20fd":function(t,e,s){},"210d":function(t,e,s){},"233f":function(t,e,s){},"277f":function(t,e,s){"use strict";s("233f")},2904:function(t,e,s){},3862:function(t,e,s){"use strict";s("7cfa")},"3f6e":function(t,e,s){"use strict";s("8caa")},"505b":function(t,e,s){"use strict";s("210d")},5281:function(t,e,s){},5674:function(t,e,s){"use strict";s("f789")},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("2b0e"),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("Navbar"),e("router-view",{staticClass:"min-vh-100"}),e("Footer")],1)},a=[],l=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"navbar navbar-expand-lg navbar-light position-fixed w-100 bg-white shadow-sm py-3"},[e("div",{staticClass:"container-fluid px-3 px-lg-5 flex-nowrap"},[e("router-link",{attrs:{to:"/photos"}},[e("div",{staticClass:"d-flex justify-content-center"},[e("div",{staticClass:"me-sm-2 me-3"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40"}},[e("path",{staticStyle:{fill:"#407bff"},attrs:{d:"M30,0H10A10,10,0,0,0,0,10V30A10,10,0,0,0,10,40H30A10,10,0,0,0,40,30V10A10,10,0,0,0,30,0ZM20.03,21.6a7.256,7.256,0,0,1-2.747-.539v-4.2A3.758,3.758,0,1,0,16.236,14.3v14.9A3.8,3.8,0,0,1,12.7,33V14.3a7.3,7.3,0,1,1,7.331,7.3Z"}})])]),e("span",{staticClass:"navbar-brand d-sm-block d-none"},[t._v("Photoshare")])])]),e("form",{staticClass:"search-form flex-grow-1 ms-2 d-flex align-items-center rounded-4 position-relative"},[e("i",{staticClass:"svg-icon px-2 d-flex"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M18.031 16.617l4.283 4.282-1.415 1.415-4.282-4.283A8.96 8.96 0 0 1 11 20c-4.968 0-9-4.032-9-9s4.032-9 9-9 9 4.032 9 9a8.96 8.96 0 0 1-1.969 5.617zm-2.006-.742A6.977 6.977 0 0 0 18 11c0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7a6.977 6.977 0 0 0 4.875-1.975l.15-.15z"}})])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"form-control border-0 shadow-none px-0",attrs:{id:"searchInput",type:"text",placeholder:"搜尋免費相片","aria-label":"Search",autocomplete:"off"},domProps:{value:t.searchValue},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch("input")},input:function(e){e.target.composing||(t.searchValue=e.target.value)}}}),e("div",{staticClass:"search-form-dropdown w-100 shadow py-3 border-0 rounded-4 position-absolute top-100 bg-white"},[t.searchRecords.length?e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("span",{staticClass:"px-3 my-3"},[t._v("最近搜尋")]),e("i",{staticClass:"svg-icon d-flex align-items-center me-3",attrs:{type:"button"},on:{click:t.deleteSearchRecords}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18",height:"18"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-11.414L9.172 7.757 7.757 9.172 10.586 12l-2.829 2.828 1.415 1.415L12 13.414l2.828 2.829 1.415-1.415L13.414 12l2.829-2.828-1.415-1.415L12 10.586z"}})])])]):t._e(),e("ul",{staticClass:"nav px-3 mb-4"},t._l(t.searchRecords.slice(0,15),(function(s,i){return e("li",{key:i,staticClass:"nav-item mb-2 me-2"},[e("button",{staticClass:"border border-1 text-primary rounded-4",attrs:{type:"button"}},[e("div",{staticClass:"nav-link",on:{click:function(e){return t.onSearch(s)}}},[t._v(" "+t._s(s)+" ")])])])})),0),e("p",{staticClass:"px-3"},[t._v("精選收藏")]),t.featuredCollections.length?e("ul",{staticClass:"nav px-3"},t._l(t.featuredCollections,(function(s,i){return e("li",{key:i,staticClass:"collection-item nav-item overflow-hidden rounded-4 mb-3 me-3"},[e("router-link",{attrs:{to:{path:"/collections/featured/"+s.id}}},[e("button",{staticClass:"border border-0 p-0"},[e("div",{staticClass:"nav-link rounded-4 d-flex flex-column"},[e("span",[t._v(t._s(s.title))]),e("span",{staticClass:"fw-normal"},[t._v(t._s(s.media_count)+"張相片和影片")])])])])],1)})),0):t.isOverLimitRequest?e("span",{staticClass:"px-3 fw-normal"},[t._v(" 同一時段的請求次數過多，請休息一下後再次嘗試！ ")]):t.isRequestError?e("span",{staticClass:"px-3 fw-normal"},[t._v(" 獲取資料時發生錯誤，我們將會盡快修復！ ")]):t._e()])]),e("div",{staticClass:"nav flex-shrink-0"},[e("a",{staticClass:"nav-item fs-4 d-flex mx-3",attrs:{href:"https://github.com/doublesung/photoshare"}},[e("i",{staticClass:"svg-icon"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 2C6.475 2 2 6.475 2 12a9.994 9.994 0 0 0 6.838 9.488c.5.087.687-.213.687-.476 0-.237-.013-1.024-.013-1.862-2.512.463-3.162-.612-3.362-1.175-.113-.288-.6-1.175-1.025-1.413-.35-.187-.85-.65-.013-.662.788-.013 1.35.725 1.538 1.025.9 1.512 2.338 1.087 2.912.825.088-.65.35-1.087.638-1.337-2.225-.25-4.55-1.113-4.55-4.938 0-1.088.387-1.987 1.025-2.688-.1-.25-.45-1.275.1-2.65 0 0 .837-.262 2.75 1.026a9.28 9.28 0 0 1 2.5-.338c.85 0 1.7.112 2.5.337 1.912-1.3 2.75-1.024 2.75-1.024.55 1.375.2 2.4.1 2.65.637.7 1.025 1.587 1.025 2.687 0 3.838-2.337 4.688-4.562 4.938.362.312.675.912.675 1.85 0 1.337-.013 2.412-.013 2.75 0 .262.188.574.688.474A10.016 10.016 0 0 0 22 12c0-5.525-4.475-10-10-10z"}})])])]),e("router-link",{attrs:{to:"/collections"}},[e("div",{staticClass:"nav-item"},[e("span",{staticClass:"nav-link px-0"},[t._v("我的收藏")])])])],1)],1)])},n=[],r=s("2f62"),d=s("7c01"),c={name:"Navbar",computed:{...Object(r["b"])(["searchRecords","featuredCollections","isOverLimitRequest","isRequestError"])},data(){return{searchValue:null}},methods:{onSearch(t){const e=document.getElementById("searchInput");e.blur(),"input"!==t&&(this.searchValue=t);const s=this.searchRecords.indexOf(this.searchValue);-1!==s&&this.searchRecords.splice(s,1),this.searchRecords.unshift(this.searchValue);const i=Object(d["c"])();Object(d["h"])(Object(d["f"])(i),{"searchRecords/":this.searchRecords}),this.$router.push({path:"/search/"+this.searchValue})},deleteSearchRecords(){const t=Object(d["c"])();Object(d["g"])(Object(d["f"])(t,"searchRecords"))}},mounted(){this.$store.dispatch("getSearchRecords"),this.$store.dispatch("getFeaturedCollections",{page:1,per_page:8})}},u=c,h=(s("fc56"),s("2877")),m=Object(h["a"])(u,l,n,!1,null,"dbc9e4b0",null),p=m.exports,v=function(){var t=this;t._self._c;return t._m(0)},b=[function(){var t=this,e=t._self._c;return e("footer",{staticClass:"d-flex justify-content-center align-items-center px-3 px-lg-5 fw-light",staticStyle:{height:"100px"}},[e("span",{staticClass:"me-4"},[t._v("© 2022 Photoshare")]),e("span",[t._v("本網頁僅供學習使用")])])}],f={name:"Footer"},g=f,C=Object(h["a"])(g,v,b,!1,null,null,null),w=C.exports,x={name:"App",components:{Navbar:p,Footer:w}},y=x,_=(s("f096"),Object(h["a"])(y,o,a,!1,null,null,null)),M=_.exports,E=s("8c4f"),O=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"position-relative"},[e("div",{staticClass:"header-image",style:{backgroundImage:`url(${t.photoCover.url})`}}),t._m(0),e("div",{staticClass:"position-absolute bottom-0 end-0 px-3 px-lg-5"},[e("p",{staticClass:"text-white opacity-75"},[e("span",[t._v("攝影師:")]),e("span",{staticClass:"ms-2"},[t._v(t._s(t.photoCover.photographer))])])])]),e("main",{staticClass:"px-3 px-lg-5"},[e("ul",{staticClass:"nav d-flex justify-content-center align-items-center my-4 my-lg-5"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/photos"}},[e("button",{staticClass:"btn btn-secondary text-white border-0 shadow-none rounded-4 fw-bold fs-4 px-3",attrs:{type:"button"}},[t._v(" 相片 ")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link fs-4",attrs:{to:"/videos"}},[e("button",{staticClass:"btn border-0 text-primary shadow-none fw-bold fs-4 px-3",attrs:{type:"button"}},[t._v(" 影片 ")])])],1)]),e("p",{staticClass:"mb-4 mb-lg-5 fs-4"},[t._v("免費圖庫相片")]),e("MediaList",{on:{getMedia:t.getMedia}})],1)])},j=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"position-absolute top-50 start-50 translate-middle d-flex flex-column align-items-center text-white text-nowrap"},[e("h1",[t._v("提供免費的照片及影片")]),e("h2",[t._v("創作者分享的最優質圖庫")])])}],z=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-flulid",staticStyle:{"margin-bottom":"100px"}},[e("div",{staticClass:"grid clearfix position-relative mn-xl-3 mn-2",on:{scroll:function(e){return t.loadingItem(e)}}},[e("div",{staticClass:"grid-sizer col-xxl-3 col-lg-4 col-6"}),t._l(t.media,(function(s,i){return e("div",{key:i,staticClass:"grid-item col-xxl-3 col-lg-4 col-6 p-xl-3 p-2"},[s.video_files?s.video_files?e("ItemVideo",{attrs:{video:s,downloadMedium:t.downloadMedium},on:{setMedium:t.updateMedium,showCollectionsModal:t.showCollectionsModal}}):t._e():e("ItemPhoto",{attrs:{photo:s,downloadMedium:t.downloadMedium},on:{setMedium:t.updateMedium,showCollectionsModal:t.showCollectionsModal}})],1)})),e("div",{staticClass:"position-absolute d-flex justify-content-center align-items-center w-100",staticStyle:{height:"100px","z-index":"-1"},style:{top:t.loadingTop}},[t.isOverLimitRequest?e("p",[t._v("同一時段的請求次數過多，請休息一下後再次嘗試！")]):t.isRequestError?e("p",[t._v("獲取資料時發生錯誤，我們將會盡快修復！")]):t.noMore&&!t.isCollection?e("p",{staticClass:"m-0"},[t._v("沒有更多的照片或影片了!")]):t._e(),t.isOverLimitRequest||t.isRequestError?t._e():[t.media.length!==t.totalResult?e("loading",{attrs:{active:t.busy,"z-index":0,"is-full-page":!1,opacity:0},on:{"update:active":function(e){t.busy=e}}},[e("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})]):t._e()]],2)],2),e("Toast",{ref:"toast",attrs:{medium:t.medium}}),t.medium?e("MediaModal",{ref:"modal",attrs:{medium:t.medium,downloadMedium:t.downloadMedium},on:{goClearMedium:t.clearMedium}}):t._e(),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}})],1)},S=[],L=s("bc3a"),k=s.n(L),R=s("84d3"),V=s.n(R),I=s("bd7e"),A=s.n(I),T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"position-fixed bottom-0 end-0 p-3",staticStyle:{"z-index":"2000"}},[e("div",{staticClass:"toast bg-white border-0",attrs:{id:"liveToast",role:"alert","aria-live":"assertive","aria-atomic":"true","data-bs-delay":"3000"}},[t._m(0),e("div",{staticClass:"toast-body"},[t._v(" 感謝 "+t._s(t.getPhotographer())+" 提供的優質照片! ")])])])},B=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"toast-header"},[e("strong",{staticClass:"me-auto"},[t._v("下載成功")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"toast","aria-label":"Close"}})])}],H=s("7b17"),$={name:"Toast",props:{medium:{type:Object}},methods:{showToast(){const t=new H["c"](document.getElementById("liveToast"));t.show()},getPhotographer(){const t=this.medium;if(t)return t.video_files?t.user.name:t.photographer}}},P=$,q=Object(h["a"])(P,T,B,!1,null,null,null),F=q.exports,D=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-image position-relative"},[e("img",{staticClass:"image mw-100 rounded-4",attrs:{src:t.photo.src.large,alt:"photo.alt",loading:"lazy"}}),e("div",{staticClass:"overlay rounded-4 bg-dark",attrs:{type:"button"},on:{click:t.setPhoto}}),e("div",{staticClass:"photographer position-absolute bottom-0 start-0 m-3 text-white d-none d-sm-block"},[e("i",{staticClass:"svg-icon-photographer me-2"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"40",height:"40"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zM6.023 15.416C7.491 17.606 9.695 19 12.16 19c2.464 0 4.669-1.393 6.136-3.584A8.968 8.968 0 0 0 12.16 13a8.968 8.968 0 0 0-6.137 2.416zM12 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}})])]),e("span",[t._v(t._s(t.photo.photographer))])]),e("button",{staticClass:"collection position-absolute top-0 end-0 m-3 d-flex justify-content-center align-items-center rounded-4 border-0 d-none d-sm-block",attrs:{type:"button"},on:{click:t.showCollectionsModal}},[e("i",{staticClass:"ri-folder-add-line fs-4 fw-normal text-primary"})]),e("button",{staticClass:"download position-absolute bottom-0 end-0 m-3 d-flex justify-content-center align-items-center rounded-4 border-0 d-none d-sm-block",attrs:{type:"button"},on:{click:t.downloadImage}},[e("i",{staticClass:"ri-download-2-line fs-4 fw-normal text-primary"})])])},N=[],U={name:"ItemPhoto",props:{photo:{type:Object},downloadMedium:{type:Function}},computed:{...Object(r["b"])(["medium"])},methods:{downloadImage(){const t=this.photo.src.original,e=this.photo.id,s=this.photo.photographer.replace(" ","-"),i="photoshare-"+s+"-"+e+".jpg";this.downloadMedium(t,i)},setPhoto(){this.$emit("setMedium",this.photo)},showCollectionsModal(){this.$emit("showCollectionsModal",this.photo)}}},Q=U,G=(s("5f1f"),Object(h["a"])(Q,D,N,!1,null,"cf992ffc",null)),W=G.exports,X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-image position-relative",on:{mouseenter:function(e){return t.palyVideo(e)},mouseleave:function(e){return t.pauseVideo(e)}}},[e("div",{staticClass:"position-relative rounded-4 overflow-hidden"},[e("img",{staticClass:"image mw-100",attrs:{src:t.imageUrl,alt:"photo.alt",loading:"lazy"}}),e("video",{staticClass:"w-100 h-auto position-absolute start-0",attrs:{preload:"none",muted:"",loop:""},domProps:{muted:!0}},[e("source",{attrs:{src:t.videoUrl,type:"video/mp4"}})])]),e("div",{staticClass:"overlay rounded-4 bg-dark",attrs:{type:"button"},on:{click:t.setVideo}}),e("i",{staticClass:"ri-youtube-fill text-white position-absolute top-0 start-0 mx-3 mt-1 fs-1"}),e("div",{staticClass:"photographer position-absolute bottom-0 start-0 m-3 text-white d-none d-sm-block"},[e("i",{staticClass:"svg-icon-photographer me-2"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"40",height:"40"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zM6.023 15.416C7.491 17.606 9.695 19 12.16 19c2.464 0 4.669-1.393 6.136-3.584A8.968 8.968 0 0 0 12.16 13a8.968 8.968 0 0 0-6.137 2.416zM12 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}})])]),e("span",[t._v(t._s(t.video.user.name))])]),e("button",{staticClass:"collection position-absolute top-0 end-0 m-3 d-flex justify-content-center align-items-center rounded-4 border-0 d-none d-sm-block",attrs:{type:"button"},on:{click:t.showCollectionsModal}},[e("i",{staticClass:"ri-folder-add-line fs-4 fw-normal text-primary"})]),e("button",{staticClass:"download position-absolute bottom-0 end-0 m-3 d-flex justify-content-center align-items-center rounded-4 border-0 d-none d-sm-block",attrs:{type:"button"},on:{click:t.downloadVideo}},[e("i",{staticClass:"ri-download-2-line fs-4 fw-normal text-primary"})])])},J=[],Z={name:"VideoItem",props:{video:{type:Object},downloadMedium:{type:Function}},data(){return{isPlaying:null,timer:null,imageUrl:null,videoUrl:null}},methods:{palyVideo(t){const e=t.target.firstChild.lastChild;e.hasAttribute("autoplay")?this.isPlaying=e.play():this.timer=setTimeout(()=>{e.setAttribute("autoplay","autoplay"),this.isPlaying=e.play()},1e3)},pauseVideo(t){const e=t.target.firstChild.lastChild;this.timer&&(clearTimeout(this.timer),this.timer=0),this.isPlaying&&this.isPlaying.then(()=>{e.paused||e.pause()})},downloadVideo(){let t=this.videoUrl,e=this.video.user.id,s=this.video.user.name.replace(" ","-"),i="photoshare-"+s+"-"+e+".mp4";this.downloadMedium(t,i)},setImageUrlSize(){const t=this.video.image,e=t.substring(0,t.indexOf("h=")),s=this.getVideo(),i=e+"h="+s.height+"&w="+s.width;this.imageUrl=i},getVideo(){const t=this.video.video_files,e=t.sort((t,e)=>t.width-e.width);return e[2]},setVideoUrl(){const t=this.getVideo();this.videoUrl=t.link},setVideo(){this.$emit("setMedium",this.video)},showCollectionsModal(){this.$emit("showCollectionsModal",this.video)}},mounted(){this.setImageUrlSize(),this.setVideoUrl()}},K=Z,Y=(s("3862"),Object(h["a"])(K,X,J,!1,null,"3b02d230",null)),tt=Y.exports,et=function(){var t=this,e=t._self._c;return e("div",[t.medium.video_files?e("VideoModal",{attrs:{video:t.medium,showCollectionsModal:t.showCollectionsModal},on:{download:t.download}}):e("PhotoModal",{attrs:{photo:t.medium,showCollectionsModal:t.showCollectionsModal},on:{download:t.download}}),e("CollectionsModal",{attrs:{medium:t.medium,photoModal:t.photoModal,collectionsModalAdd:t.collectionsModalAdd}}),e("CollectionsModalAdd",{attrs:{photo:t.medium,collectionsModalAdd:t.collectionsModalAdd,showCollectionsModal:t.showCollectionsModal}})],1)},st=[],it=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal full-height-modal fade",attrs:{id:"photoModal",tabindex:"-1","aria-hidden":"true"}},[e("button",{staticClass:"close-svg-icon border-0 bg-transparent position-absolute top-0 end-0 m-3 d-none d-md-block",attrs:{"data-bs-dismiss":"modal","aria-label":"Close",type:"button"}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"32",height:"32"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"}})])]),e("div",{staticClass:"modal-dialog h-100 rounded-0 my-0 border-0 m-sm-auto m-0 min-w-md-80 min-w-100"},[e("div",{staticClass:"modal-content full-height-modal-content h-100 d-flex justify-content-between align-items-center p-4"},[e("div",{staticClass:"d-flex justify-content-md-between justify-content-center align-items-center w-100"},[e("div",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"svg-icon me-2"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"50",height:"50"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zM6.023 15.416C7.491 17.606 9.695 19 12.16 19c2.464 0 4.669-1.393 6.136-3.584A8.968 8.968 0 0 0 12.16 13a8.968 8.968 0 0 0-6.137 2.416zM12 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}})])]),e("span",{staticClass:"d-none d-md-block"},[t._v(t._s(t.photo.photographer))])]),e("div",{staticClass:"d-flex"},[e("button",{staticClass:"border border-1 text-primary rounded-4 px-3 py-2 mx-3 d-flex align-items-center",attrs:{type:"button"},on:{click:t.showCollectionsModal}},[e("i",{staticClass:"svg-icon me-0 me-md-1 d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M6 7V4a1 1 0 0 1 1-1h6.414l2 2H21a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-3v3a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h3zm0 2H4v10h12v-2H6V9zm2-4v10h12V7h-5.414l-2-2H8z"}})])]),e("span",{staticClass:"d-none d-md-block"},[t._v("收集")])]),e("div",{staticClass:"border-0 px-0 d-flex rounded-4 overflow-hidden"},[e("button",{staticClass:"btn btn-secondary text-white border-end rounded-0 border border-0 shadow-none"},[t._v(" 免費下載 ")]),e("button",{staticClass:"btn btn-secondary rounded-0 p-1 dropdown-toggle-split border border-0 shadow-none",attrs:{id:"dropdownBtnSize",type:"button","data-bs-toggle":"dropdown","data-bs-offset":"0,10","data-bs-auto-close":"outside","aria-expanded":"false"}},[e("i",{staticClass:"download-svg-icon h-100 px-1 d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 13.172l4.95-4.95 1.414 1.414L12 16 5.636 9.636 7.05 8.222z"}})])])]),e("ul",{staticClass:"dropdown-menu dropdown-menu-end py-2",attrs:{id:"dropdownMenuSize","aria-labelledby":"dropdownBtnSize"}},[t._m(0),t._l(t.sizeArr,(function(s,i){return e("li",{key:i},[e("div",{staticClass:"dropdown-item bg-transparent text-dark d-flex align-items-center item-active",attrs:{type:"button"},on:{click:function(e){t.currentSizeIndex=i}}},[e("span",[t._v(t._s(s.text))]),e("span",{staticClass:"text-primary ms-1 me-2"},[t._v(t._s(t.calculateSize(s.size)))]),e("i",{staticClass:"position-relative p-3"},[t.currentSizeIndex===i?e("svg",{staticClass:"position-absolute top-50 end-0 translate-middle-y",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M10 15.172l9.192-9.193 1.415 1.414L10 18l-6.364-6.364 1.414-1.414z"}})]):t._e()])])])})),e("li",{staticClass:"bg-transparent d-flex justify-content-center border-top mt-2"},[e("button",{staticClass:"btn btn-secondary text-white mt-2 rounded-4",attrs:{type:"button"},on:{click:t.downloadImage}},[t._v(" 下載選擇的收藏 ")])])],2)])]),e("button",{staticClass:"close-svg-icon-md border-0 bg-transparent position-absolute top-0 end-0 m-1 d-block d-md-none",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"}})])])]),e("div",{staticClass:"position-relative h-80 w-100"},[e("img",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"w-100 h-100",staticStyle:{"object-fit":"contain"},attrs:{src:t.photo.src.original,alt:""},on:{load:function(e){t.isLoading=!1}}}),e("loading",{attrs:{active:t.isLoading,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}},[e("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])],1),e("div",{staticClass:"d-flex justify-content-md-between justify-content-center align-items-center w-100"},[e("div",{staticClass:"d-flex align-items-center me-3"},[e("i",{staticClass:"svg-icon me-1"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-.997-4L6.76 11.757l1.414-1.414 2.829 2.829 5.656-5.657 1.415 1.414L11.003 16z"}})])]),e("span",{staticClass:"text-primary fw-normal"},[t._v("免費使用")])]),e("button",{staticClass:"border border-1 text-primary rounded-4 px-3 py-2 d-flex align-items-center",attrs:{type:"button"}},[e("i",{staticClass:"svg-icon me-1 d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z"}})])]),e("span",[t._v("資訊")])])])])])])},ot=[function(){var t=this,e=t._self._c;return e("li",[e("span",{staticClass:"dropdown-item bg-transparent text-primary"},[t._v("選擇尺寸:")])])}],at={name:"PhotoModal",props:{photo:{Object:Object},showCollectionsModal:{type:Function}},data(){return{isLoading:!0,sizeArr:[{text:"原始尺寸",size:"original"},{text:"大",size:"large"},{text:"中",size:"medium"},{text:"小",size:"small"}],currentSizeIndex:0}},methods:{watchCloseMediumModal(){const t=document.getElementById("photoModal");t.addEventListener("hidden.bs.modal",()=>{this.toggleCheck(0)})},calculateSize(t){const e=this.photo.width,s=this.photo.height;if("original"===t)return`${e} x ${s}`;if("large"===t){if(e===s)return"1920 x 1920";{const t=e/1920,i=Math.ceil(s/t);return"1920 x "+i}}if("medium"===t){if(e===s)return"1280 x 1280";{const t=e/1280,i=Math.ceil(s/t);return"1280 x "+i}}if(e===s)return"640 x 640";{const t=e/640,i=Math.ceil(s/t);return"640 x "+i}},downloadImage(){const t=this.calculateSize(this.sizeArr[this.currentSizeIndex].size),e=t.split(" x ")[0],s=t.split(" x ")[1],i=this.photo.id,o=this.photo.photographer,a=`https://images.pexels.com/photos/${i}/pexels-photo-${i}.jpeg?auto=compress&cs=tinysrgb&fit=crop&w=${e}&h=${s}`,l=`photoshare-${o}-${i}.jpg`;this.$emit("download",a,l)}}},lt=at,nt=(s("6ec8"),Object(h["a"])(lt,it,ot,!1,null,"02c96541",null)),rt=nt.exports,dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal full-height-modal fade",attrs:{id:"photoModal",tabindex:"-1","aria-hidden":"true"}},[e("button",{staticClass:"close-svg-icon border-0 bg-transparent position-absolute top-0 end-0 m-3 d-none d-md-block",attrs:{"data-bs-dismiss":"modal","aria-label":"Close",type:"button"}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"32",height:"32"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"}})])]),e("div",{staticClass:"modal-dialog h-100 rounded-0 my-0 border-0 m-sm-auto m-0 min-w-md-80 min-w-100"},[e("div",{staticClass:"modal-content full-height-modal-content h-100 d-flex justify-content-between align-items-center p-4"},[e("div",{staticClass:"d-flex justify-content-md-between justify-content-center align-items-center w-100"},[e("div",{staticClass:"d-flex align-items-center"},[e("i",{staticClass:"svg-icon me-2"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"50",height:"50"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 2c5.52 0 10 4.48 10 10s-4.48 10-10 10S2 17.52 2 12 6.48 2 12 2zM6.023 15.416C7.491 17.606 9.695 19 12.16 19c2.464 0 4.669-1.393 6.136-3.584A8.968 8.968 0 0 0 12.16 13a8.968 8.968 0 0 0-6.137 2.416zM12 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}})])]),e("span",{staticClass:"d-none d-md-block"},[t._v(t._s(t.video.user.name))])]),e("div",{staticClass:"d-flex"},[e("button",{staticClass:"border border-1 text-primary rounded-4 px-3 py-2 mx-3 d-flex align-items-center",attrs:{type:"button"},on:{click:t.showCollectionsModal}},[e("i",{staticClass:"svg-icon me-0 me-md-1 d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M6 7V4a1 1 0 0 1 1-1h6.414l2 2H21a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-3v3a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h3zm0 2H4v10h12v-2H6V9zm2-4v10h12V7h-5.414l-2-2H8z"}})])]),e("span",{staticClass:"d-none d-md-block"},[t._v("收集")])]),e("div",{staticClass:"border-0 px-0 d-flex rounded-4 overflow-hidden"},[e("button",{staticClass:"btn btn-secondary text-white border-end rounded-0 border border-0 shadow-none"},[t._v(" 免費下載 ")]),e("button",{staticClass:"btn btn-secondary rounded-0 p-1 dropdown-toggle-split border border-0 shadow-none",attrs:{id:"dropdownBtnQuality",type:"button","data-bs-toggle":"dropdown","data-bs-offset":"0,10","data-bs-auto-close":"outside","aria-expanded":"false"}},[e("i",{staticClass:"download-svg-icon h-100 px-1 d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 13.172l4.95-4.95 1.414 1.414L12 16 5.636 9.636 7.05 8.222z"}})])])]),e("ul",{staticClass:"dropdown-menu dropdown-menu-end py-2",attrs:{id:"dropdownMenuSize","aria-labelledby":"dropdownBtnQuality"}},[t._m(0),t._l(t.videoSizeArr,(function(s,i){return e("li",{key:i},[e("div",{staticClass:"dropdown-item bg-transparent text-dark d-flex align-items-center item-active",attrs:{type:"button"},on:{click:function(e){t.currentSizeIndex=i}}},[e("span",[t._v(t._s(s.quality))]),e("span",{staticClass:"text-primary ms-1 me-2"},[t._v(" "+t._s(s.width)+" x "+t._s(s.height)+" ")]),e("i",{staticClass:"position-relative p-3"},[t.currentSizeIndex===i?e("svg",{staticClass:"position-absolute top-50 end-0 translate-middle-y",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M10 15.172l9.192-9.193 1.415 1.414L10 18l-6.364-6.364 1.414-1.414z"}})]):t._e()])])])})),e("li",{staticClass:"bg-transparent d-flex justify-content-center border-top mt-2"},[e("button",{staticClass:"btn btn-secondary text-white mt-2 rounded-4",attrs:{type:"button"},on:{click:t.downloadVideo}},[t._v(" 下載選擇的收藏 ")])])],2)])]),e("button",{staticClass:"close-svg-icon-md border-0 bg-transparent position-absolute top-0 end-0 m-1 d-block d-md-none",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"}})])])]),e("div",{staticClass:"h-80"},[e("video",{staticClass:"w-100 h-100",staticStyle:{"object-fit":"contain"},attrs:{controls:"",autoplay:"",loop:""}},[e("source",{attrs:{src:t.videoCoverLink,type:"video/mp4"}})])]),e("div",{staticClass:"d-flex justify-content-md-between justify-content-center align-items-center w-100"},[e("div",{staticClass:"d-flex align-items-center me-3"},[e("i",{staticClass:"svg-icon me-1"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-.997-4L6.76 11.757l1.414-1.414 2.829 2.829 5.656-5.657 1.415 1.414L11.003 16z"}})])]),e("span",{staticClass:"text-primary fw-normal"},[t._v("免費使用")])]),e("button",{staticClass:"border border-1 text-primary rounded-4 px-3 py-2 d-flex align-items-center",attrs:{type:"button"}},[e("i",{staticClass:"svg-icon me-1 d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zM11 7h2v2h-2V7zm0 4h2v6h-2v-6z"}})])]),e("span",[t._v("資訊")])])])])])])},ct=[function(){var t=this,e=t._self._c;return e("li",[e("span",{staticClass:"dropdown-item bg-transparent text-primary"},[t._v("選擇尺寸:")])])}],ut={name:"VideoModal",props:{video:{type:Object},showCollectionsModal:{type:Function},downloadMedium:{type:Function}},data(){return{videoSizeArr:null,videoCoverLink:null,currentSizeIndex:0}},methods:{orderVideoSize(){const t=this.video.video_files,e=t.sort((t,e)=>t.width-e.width);this.videoSizeArr=e,this.videoCoverLink=e[e.length-1].link},toggleCheck(t){this.currentSizeIndex=t},downloadVideo(){const t=this.videoSizeArr[this.currentSizeIndex],e=t.link,s=this.video.user.id,i=this.video.user.name.replace(" ","-"),o="photoshare-"+i+"-"+s+".mp4";this.$emit("download",e,o)}},mounted(){this.orderVideoSize()}},ht=ut,mt=(s("5674"),Object(h["a"])(ht,dt,ct,!1,null,"ec0d14a8",null)),pt=mt.exports,vt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal center-modal fade rounded-4",attrs:{id:"collectionsModal",tabindex:"-1","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",staticStyle:{"min-width":"30%"}},[e("div",{staticClass:"modal-content rounded-4"},[e("div",{staticClass:"p-5"},[e("button",{staticClass:"btn-close position-absolute top-0 end-0 m-3",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}}),e("div",{staticClass:"position-relative"},[e("div",{staticClass:"d-flex flex-column align-items-center"},[e("h5",{staticClass:"modal-title text-center",attrs:{id:"exampleModalLabel"}},[t._v("儲存置收藏")]),e("router-link",{staticClass:"fw-normal mb-4",attrs:{to:"/collections"}},[e("div",{attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:t.closeMediumModal}},[t._v(" 我的收藏 ")])])],1),e("div",{staticClass:"container-flulid"},[e("div",{staticClass:"d-flex flex-wrap mn-2"},[e("div",{staticClass:"col-4 position-relative p-2 fw-normal"},[e("div",{attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:t.showCollectionsModalAdd}},[t._m(0),e("span",{staticClass:"text"},[t._v("建立新收藏")])])]),t._l(t.collections,(function(s,i){return e("div",{key:i,staticClass:"col-4 position-relative p-2 fw-normal"},[e("div",{attrs:{type:"button"}},[t.getMediaArray(s.media).length?e("div",{staticClass:"item-placeholder mb-2"},[e("div",{staticClass:"item bg-secondary bg-opacity-10 d-flex justify-content-center align-items-center overflow-hidden rounded-4"},[t.getMediaArray(s.media)[0].video_files?e("img",{staticClass:"w-100 h-100",staticStyle:{"object-fit":"cover"},attrs:{src:t.getMediaArray(s.media)[0].image,alt:""}}):e("img",{staticClass:"w-100 h-100",staticStyle:{"object-fit":"cover"},attrs:{src:t.getMediaArray(s.media)[0].src.large,alt:""}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCollected(s.media),expression:"isCollected(collection.media)"}],staticClass:"overlay rounded-4 d-flex justify-content-center align-items-center",on:{click:function(e){return t.addMedium(s)}}},[e("i",{staticClass:"image-add-icon ri-add-circle-fill fs-1"})]),t.isCollected(s.media)?e("div",{on:{click:function(e){return t.deleteMedium(s)}}},[t._m(1,!0),t._m(2,!0)]):t._e()])]):e("div",{staticClass:"item-placeholder mb-2"},[e("div",{staticClass:"item bg-primary bg-opacity-10 d-flex justify-content-center align-items-center overflow-hidden rounded-4"},[e("i",{staticClass:"svg-icon"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"50",height:"50"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M5 11.1l2-2 5.5 5.5 3.5-3.5 3 3V5H5v6.1zM4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm11.5 7a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isCollected(s.media),expression:"isCollected(collection.media)"}],staticClass:"overlay rounded-4 d-flex justify-content-center align-items-center",on:{click:function(e){return t.addMedium(s)}}},[e("i",{staticClass:"image-add-icon ri-add-circle-fill fs-1"})]),t.isCollected(s.media)?e("div",{on:{click:function(e){return t.deleteMedium(s,i)}}},[t._m(3,!0),t._m(4,!0)]):t._e()])]),e("div",{staticClass:"text"},[t._v(t._s(s.title))])])])}))],2)]),e("loading",{attrs:{active:t.isLoading,"is-full-page":!1,opacity:1},on:{"update:active":function(e){t.isLoading=e}}},[e("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])],1)])])])])},bt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item-placeholder mb-2"},[e("div",{staticClass:"item bg-primary bg-opacity-10 d-flex justify-content-center align-items-center rounded-4"},[e("div",{staticClass:"overlay rounded-4 d-flex justify-content-center align-items-center"},[e("i",{staticClass:"add-icon ri-add-circle-line fs-1"})])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"overlay-check rounded-4 d-flex justify-content-center align-items-center"},[e("i",{staticClass:"image-check-icon ri-checkbox-circle-fill fs-1"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"overlay-delete rounded-4 d-flex justify-content-center align-items-center"},[e("i",{staticClass:"image-delete-icon ri-close-circle-fill fs-1"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"overlay-check rounded-4 d-flex justify-content-center align-items-center"},[e("i",{staticClass:"image-check-icon ri-checkbox-circle-fill fs-1"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"overlay-delete rounded-4 d-flex justify-content-center align-items-center"},[e("i",{staticClass:"image-delete-icon ri-close-circle-fill fs-1"})])}],ft={name:"CollectionsModal",props:{medium:{type:Object},photoModal:{type:Object},collectionsModalAdd:{type:Object}},computed:{...Object(r["b"])(["collections"]),isCollection(){return this.$route.path.includes("collections")}},data(){return{isLoading:!0}},methods:{showCollectionsModalAdd(){this.collectionsModalAdd.show();const t=document.getElementById("collectionsModalAdd"),e=document.querySelectorAll(".modal-backdrop"),s=Array.prototype.slice.call(e).slice(-1)[0];t.style.zIndex=1065,s.style.zIndex=1060},addMedium(t){const e=Object(d["c"])(),s=`collections/${t.id}/media`,i=Object(d["e"])(Object(d["a"])(Object(d["f"])(e),s)).key;Object(d["h"])(Object(d["f"])(e),{[s+"/"+i]:this.medium})},deleteMedium(t){const e=Object(d["c"])(),s=Object.entries(t.media).reverse().find((t,e)=>{if(t[1].id==this.medium.id)return this.isCollection&&this.$store.state.media.splice(e,1)[0],t}),i=`collections/${t.id}/media/${s[0]}`;Object(d["g"])(Object(d["f"])(e,i))},closeMediumModal(){this.photoModal.hide()},isCollected(t){if(t)return Object.values(t).find(t=>t.id==this.medium.id)},getMediaArray(t){return t?Object.values(t):[]}},watch:{collections(){this.isLoading=!1}},mounted(){this.$store.dispatch("getCollections")}},gt=ft,Ct=(s("88d7"),Object(h["a"])(gt,vt,bt,!1,null,"65d3d081",null)),wt=Ct.exports,xt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal center-modal fade rounded-4",attrs:{id:"collectionsModalAdd",tabindex:"-1","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-scrollable",staticStyle:{"min-width":"30%"}},[e("div",{staticClass:"modal-content rounded-4"},[e("div",{staticClass:"p-5"},[t._m(0),e("button",{staticClass:"btn-close position-absolute top-0 end-0 m-3",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}}),e("form",{staticClass:"needs-validation",attrs:{target:"stop-reload"}},[e("div",{staticClass:"mb-4"},[e("label",{staticClass:"form-label",attrs:{for:"collectionTitleAdd"}},[t._v("收藏標題")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.collectionTitleAdd,expression:"collectionTitleAdd"}],staticClass:"form-control shadow-none",attrs:{type:"text",id:"collectionTitleAdd",required:""},domProps:{value:t.collectionTitleAdd},on:{input:function(e){e.target.composing||(t.collectionTitleAdd=e.target.value)}}})]),e("div",{staticClass:"gap-3 d-flex justify-content-end"},[e("button",{staticClass:"btn btn-secondary text-white me-md-2",attrs:{type:"submit"},on:{click:t.addCollection}},[t._v(" 建立收藏 ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:t.showCollectionsModal}},[t._v(" 返回 ")])])]),e("iframe",{staticStyle:{display:"none"},attrs:{name:"stop-reload"}})])])])])},yt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column align-items-center"},[e("h5",{staticClass:"modal-title text-center mb-4",attrs:{id:"exampleModalLabel"}},[t._v("新增收藏")])])}],_t={name:"CollectionsModalAdd",computed:{...Object(r["b"])(["collections"])},props:{photo:{type:Object},collectionsModalAdd:{type:Object},showCollectionsModal:{type:Function}},data(){return{collectionTitleAdd:null}},methods:{addCollection(){if(this.collectionTitleAdd){const t=Object(d["c"])(),e=Object(d["e"])(Object(d["a"])(Object(d["f"])(t),"collections")).key;Object(d["h"])(Object(d["f"])(t),{["collections/"+e]:{id:e,title:this.collectionTitleAdd,description:"",media:{[e]:this.photo}}}),this.collectionsModalAdd.hide(),this.showCollectionsModal(),this.collectionTitleAdd=null}}}},Mt=_t,Et=Object(h["a"])(Mt,xt,yt,!1,null,null,null),Ot=Et.exports,jt={name:"PhotosModal",props:{medium:{type:Object},downloadMedium:{type:Function}},components:{PhotoModal:rt,VideoModal:pt,CollectionsModal:wt,CollectionsModalAdd:Ot},data(){return{photoModal:null,collectionsModal:null,collectionsModalAdd:null}},methods:{modalObject(){this.photoModal=new H["b"](document.getElementById("photoModal")),this.collectionsModal=new H["b"](document.getElementById("collectionsModal")),this.collectionsModalAdd=new H["b"](document.getElementById("collectionsModalAdd"))},closeMediumModal(){this.photoModal.hide()},watchCloseMediumModal(){const t=document.getElementById("photoModal");t.addEventListener("hidden.bs.modal",()=>{this.$emit("goClearMedium")});const e=document.getElementById("collectionsModal");e.addEventListener("hidden.bs.modal",()=>{const e=t.style.display,i=s.style.display;e||i||this.$emit("goClearMedium")});const s=document.getElementById("collectionsModalAdd");s.addEventListener("hidden.bs.modal",()=>{const s=t.style.display,i="none"!==e.style.display;s||i||this.$emit("goClearMedium")})},closeDropdownMenuSize(){const t=document.getElementById("dropdownMenuSize");t.classList.remove("show")},showCollectionsModal(){this.collectionsModal.show();const t=document.getElementById("collectionsModal"),e=document.querySelectorAll(".modal-backdrop"),s=Array.prototype.slice.call(e).slice(-1)[0];t.style.zIndex=1065,s.style.zIndex=1060},download(t,e){this.downloadMedium(t,e),this.closeDropdownMenuSize()}},mounted(){this.modalObject(),this.watchCloseMediumModal()}},zt=jt,St=(s("b6ed"),Object(h["a"])(zt,et,st,!1,null,"6e25aaa2",null)),Lt=St.exports,kt={name:"MediaList",components:{MediaModal:Lt,Toast:F,ItemPhoto:W,ItemVideo:tt},computed:{...Object(r["b"])(["newMedia","totalResult","isOverLimitRequest","isRequestError"]),isCollection(){return this.$route.path.includes("collections")},media:{get:function(){return this.$store.state.media},set:function(t){this.$store.state.media=t}}},data(){return{medium:null,loading:!1,loadingTop:"0px",busy:!1,oldMediaLength:0,noMore:!1}},methods:{showToast(){this.$refs.toast.showToast()},masonryImages(){const t=document.querySelector(".grid");A()(t,()=>{new V.a(t,{itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0,transitionDuration:".2s"}),this.handleGridItemClass(),this.busy=!1,this.loadingTop=t.style.height?t.style.height:"0px"})},downloadMedium(t,e){k.a.get(t,{responseType:"blob"}).then(t=>{const s=window.URL.createObjectURL(t.data),i=document.createElement("a");document.body.appendChild(i),i.href=s,i.download=e,i.click(),i.remove(),URL.revokeObjectURL(t.data),this.showToast()})},updateMedium(t){this.medium=t,this.$nextTick(()=>{this.$refs.modal.photoModal.show()})},clearMedium(){this.medium=null},showCollectionsModal(t){this.medium=t,this.$nextTick(()=>{this.$refs.modal.collectionsModal.show()})},loadMore(){if(!this.isOverLimitRequest&&!this.isRequestError||this.isCollection)if(this.media.length!==this.totalResult){const t=document.querySelector(".grid");this.loadingTop=t.style.height?t.style.height:"0px",this.busy=!0,this.$emit("getMedia")}else setTimeout(()=>{this.noMore=!0},300)},handleGridItemClass(){const t=Array.from(document.querySelectorAll(".grid-item")),e=t.length,s=this.oldMediaLength,i=t.slice(s-e);function o(){i.forEach(t=>{t.classList.remove("animate__animated","animate__slideInUp","animate__faster"),t.removeEventListener("animationend",o)})}i.forEach(t=>{t.classList.add("animate__animated","animate__slideInUp","animate__faster"),t.style.visibility="visible",t.addEventListener("animationend",o)}),this.oldMediaLength=e}},watch:{newMedia(){setTimeout(()=>{this.media.push.apply(this.media,this.newMedia),this.$nextTick(()=>{const t=Array.from(document.querySelectorAll(".grid-item")),e=t.length,s=this.oldMediaLength,i=t.slice(s-e);i.forEach(t=>{t.style.visibility="hidden"}),this.masonryImages()})},500)}},destroyed(){this.$store.state.media=[],this.$store.state.totalResult=null}},Rt=kt,Vt=(s("a53f"),Object(h["a"])(Rt,z,S,!1,null,"e0d73d92",null)),It=Vt.exports,At={name:"Home",computed:{...Object(r["b"])(["photoCover"])},data(){return{page:0}},components:{MediaList:It},methods:{getPhotoCover(){const t=Math.floor(3*Math.random()+1);this.$store.dispatch("getCover",{id:t,path:"photoCovers"})},getMedia(){this.page++,this.$store.dispatch("getFeaturedPhotos",{page:this.page})}},mounted(){this.getPhotoCover()}},Tt=At,Bt=(s("be63"),Object(h["a"])(Tt,O,j,!1,null,"2ca679c8",null)),Ht=Bt.exports,$t=function(){var t=this,e=t._self._c;return e("div",[e("header",{staticClass:"position-relative"},[e("div",{staticClass:"header-video"},[e("video",{attrs:{src:t.videoCover.url,autoplay:"",muted:"",loop:""},domProps:{muted:!0}})]),t._m(0),e("div",{staticClass:"position-absolute bottom-0 end-0 px-3 px-lg-5"},[e("p",{staticClass:"text-white opacity-75"},[e("span",[t._v("攝影師:")]),e("span",{staticClass:"ms-2"},[t._v(t._s(t.videoCover.photographer))])])])]),e("main",{staticClass:"px-3 px-lg-5"},[e("ul",{staticClass:"nav d-flex justify-content-center align-items-center my-4 my-lg-5"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/photos"}},[e("button",{staticClass:"btn border-0 text-primary shadow-none fw-bold fs-4 px-3",attrs:{type:"button"}},[t._v(" 相片 ")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link fs-4",attrs:{to:"/videos"}},[e("button",{staticClass:"btn btn-secondary text-white border-0 shadow-none rounded-4 fw-bold fs-4 px-3",attrs:{type:"button"}},[t._v(" 影片 ")])])],1)]),e("p",{staticClass:"mb-4 mb-lg-5 fs-4"},[t._v("免費圖庫相片")]),e("MediaList",{on:{getMedia:t.getMedia}})],1)])},Pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"position-absolute top-50 start-50 translate-middle d-flex flex-column align-items-center text-white text-nowrap"},[e("h1",[t._v("提供免費的照片及影片")]),e("h2",[t._v("創作者分享的最優質圖庫")])])}],qt={name:"Videos",computed:{...Object(r["b"])(["videoCover"])},data(){return{page:1}},components:{MediaList:It},methods:{getVideoCover(){const t=Math.floor(3*Math.random()+1);this.$store.dispatch("getCover",{id:t,path:"videoCovers"})},getMedia(){this.page++,this.$store.dispatch("getFeaturedVideos",{page:this.page})}},mounted(){this.getVideoCover()}},Ft=qt,Dt=(s("277f"),Object(h["a"])(Ft,$t,Pt,!1,null,"84c6f92c",null)),Nt=Dt.exports,Ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid px-3 px-lg-5 pt-7"},[e("div",{staticClass:"d-flex flex-column align-items-center"},[e("h1",[t._v("與「"+t._s(t.searchQuery)+"」相關的"+t._s(t.isPhoto?"照片":"影片"))]),e("h5",{staticClass:"mt-3"},[t._v(" 找到"+t._s(t.totalResult?t.totalResult:0)+"個搜尋結果 ")]),e("ul",{staticClass:"nav position-relative d-flex justify-content-center w-100"},[e("div",{staticClass:"d-flex justify-content-center col-12 my-4 my-lg-5"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:{path:"/search/"+t.searchQuery}}},[e("button",{staticClass:"btn border-0 shadow-none rounded-4 fw-bold fs-4 px-3",class:t.photoBtnClass,attrs:{type:"button"}},[t._v(" 相片 ")])])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link fs-4",attrs:{to:{path:"/search/video/"+t.searchQuery}}},[e("button",{staticClass:"btn border-0 shadow-none rounded-4 fw-bold fs-4 px-3",class:t.videoBtnClass,attrs:{type:"button"}},[t._v(" 影片 ")])])],1)]),e("li",{staticClass:"nav-item position-lg-absolute d-flex align-items-center end-0 w-100 w-lg-auto h-100 mb-4"},[e("button",{staticClass:"border text-primary w-100 px-3 py-2 d-flex align-items-center",class:t.filterConditionNumber?"button-rounded-start border-end-0":"rounded-4",staticStyle:{transition:"none"},attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":".multi-collapse","aria-expanded":"false","aria-controls":"directionCollapse sizeCollapse colorCollapse"}},[e("i",{staticClass:"svg-icon d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0H24V24H0z"}}),e("path",{attrs:{d:"M21 4v2h-1l-5 7.5V22H9v-8.5L4 6H3V4h18zM6.404 6L11 12.894V20h2v-7.106L17.596 6H6.404z"}})])]),e("span",{staticClass:"ps-1"},[t._v(" 篩選 "),t.filterConditionNumber?[t._v("("+t._s(t.filterConditionNumber)+")")]:t._e()],2)]),t.filterConditionNumber?e("button",{staticClass:"border text-primary p-2 border-start d-flex align-items-center",staticStyle:{"border-radius":"0 1rem 1rem 0"},attrs:{type:"button"},on:{click:t.resetFilterCondition}},[e("i",{staticClass:"ri-close-line fs-5",staticStyle:{"line-height":"24px","vertical-align":"middle"}})]):t._e()])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4 col-12"},[e("div",{staticClass:"collapse multi-collapse",attrs:{id:"directionCollapse"}},[e("div",{staticClass:"dropdown pb-4"},[e("button",{staticClass:"bg-transparent border border-1 text-primary rounded-4 text-start w-100 py-2 px-4",attrs:{type:"button",id:"directionCollapseButton","data-bs-toggle":"dropdown","data-bs-offset":"0,10","aria-expanded":"false"}},[t._v(" "+t._s(t.currentDirection.text)+" ")]),e("ul",{staticClass:"dropdown-menu w-100 rounded-4",attrs:{"aria-labelledby":"directionCollapseButton"}},t._l(t.directions,(function(s,i){return e("li",{key:i},[e("button",{staticClass:"bg-transparent border-0 text-primary text-start w-100 py-2 px-4",on:{click:function(e){return t.searchDirection(s)}}},[t._v(" "+t._s(s.text)+" ")])])})),0)])])]),e("div",{staticClass:"col-lg-4 col-12"},[e("div",{staticClass:"collapse multi-collapse",attrs:{id:"sizeCollapse"}},[e("div",{staticClass:"dropdown pb-4"},[e("button",{staticClass:"bg-transparent border border-1 text-primary rounded-4 text-start w-100 py-2 px-4",attrs:{type:"button",id:"sizeCollapseButton","data-bs-toggle":"dropdown","data-bs-offset":"0,10","aria-expanded":"false"}},[t._v(" "+t._s(t.currnetSize.text)+" ")]),e("ul",{staticClass:"dropdown-menu w-100 rounded-4",attrs:{"aria-labelledby":"sizeCollapseButton"}},t._l(t.sizes,(function(s,i){return e("li",{key:i},[e("button",{staticClass:"bg-transparent border-0 text-primary text-start w-100 py-2 px-4",on:{click:function(e){return t.searchSize(s)}}},[t._v(" "+t._s(s.text)+" ")])])})),0)])])]),e("div",{staticClass:"col-lg-4 col-12"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isPhoto,expression:"isPhoto"}],staticClass:"color-collapse collapse multi-collapse",attrs:{id:"colorCollapse"}},[e("div",{staticClass:"dropdown pb-4"},[e("div",{staticClass:"d-flex align-items-center border border-1 rounded-4 ps-4 p-2",attrs:{id:"colorCollapseButton","data-bs-toggle":"dropdown","data-bs-offset":"0,10","aria-expanded":"false"}},[e("div",{staticClass:"color-show me-2 rounded-circle",style:{backgroundColor:t.hexBgColor}}),e("span",{staticClass:"text-primary me-1"},[t._v("#")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentColor,expression:"currentColor"}],staticClass:"color-input bg-transparent border-0 text-primary rounded-4 text-start w-100",attrs:{type:"text",placeholder:"輸入 HEX 色碼",maxlength:"6"},domProps:{value:t.currentColor},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchColor(e,"")},input:function(e){e.target.composing||(t.currentColor=e.target.value)}}}),e("div",{staticClass:"dropdown-menu w-100 rounded-4",attrs:{"aria-labelledby":"colorCollapseButton"}},[e("ul",{staticClass:"dropdown-color-menu d-flex flex-wrap px-4 my-3 w-100"},t._l(t.colors,(function(s,i){return e("li",{key:i,staticClass:"col-2",style:{"background-color":s},on:{click:function(e){return t.searchColor(e,s)}}})})),0)])])])])])]),e("MediaList",{ref:"mediaList",on:{getMedia:t.getMedia}})],1)},Qt=[],Gt={name:"Search",components:{MediaList:It},computed:{...Object(r["b"])(["totalResult"]),searchQuery(){return this.$route.params.query},isPhoto(){return!this.$route.path.includes("video")},photoBtnClass(){return this.isPhoto?"btn-secondary text-white":"text-primary"},videoBtnClass(){return this.isPhoto?"text-primary":"btn-secondary text-white"},filterConditionNumber(){return Object.values(this.filterCondition).filter(t=>t).length}},data(){return{page:0,filterCondition:{orientation:"",size:"",color:""},currentDirection:{text:"所有方向",value:"allDirection"},directions:[{text:"所有方向",value:"allDirection"},{text:"橫向",value:"landscape"},{text:"縱向",value:"portrait"},{text:"正方形",value:"square"}],currnetSize:{text:"所有尺寸",value:"allSize"},sizes:[{text:"所有尺寸",value:"allSize"},{text:"大",value:"large"},{text:"中",value:"medium"},{text:"小",value:"small"}],currentColor:"",oldColor:"",colors:["#CCF3FC","#D7B9FC","#F0CED1","#F9E7CB","#E0E9CA","#FFFFFF","#23C5EB","#7311EB","#CF3643","#EA9B20","#99C03A","#959595","#00586D","#2A005D","#61030C","#6A4000","#3D5309","#161616"],hexBgColor:""}},methods:{resetFilterCondition(){this.filterCondition={orientation:"",size:"",color:""},this.currentDirection={text:"所有方向",value:"allDirection"},this.currnetSize={text:"所有尺寸",value:"allSize"},this.currentColor="",this.reload()},searchDirection(t){this.currentDirection.value!==t.value&&(this.currentDirection=t,"所有方向"===t.text?this.filterCondition.orientation="":this.filterCondition.orientation=t.value,this.reload())},searchSize(t){this.currnetSize.value!==t.value&&(this.currnetSize=t,"所有尺寸"===t.text?this.filterCondition.size="":this.filterCondition.size=t.value,this.reload())},searchColor(t,e){if(e)this.currentColor=e.replace("#","");else{const s=new H["a"](t.target);s.hide(),e="#"+t.target.value}this.oldColor!==e&&this.isHex()&&(this.oldColor=e,this.filterCondition.color=e.replace("#",""),this.reload())},getMedia(){this.page++,this.isPhoto?this.getSearchPhotos():this.getSearchVideos()},isHex(){let t="#"+this.currentColor;const e=document.createElement("div");document.body.appendChild(e),e.style.backgroundColor=t;const s=e.style.backgroundColor;return e.remove(),s},getSearchPhotos(){this.$store.dispatch("getSearchPhotos",{page:this.page,query:this.searchQuery,orientation:this.filterCondition.orientation,size:this.filterCondition.size,color:this.filterCondition.color})},getSearchVideos(){this.$store.dispatch("getSearchVideos",{page:this.page,query:this.searchQuery,orientation:this.filterCondition.orientation,size:this.filterCondition.size})},reload(){this.page=0,this.$refs.mediaList.media=[],this.$refs.mediaList.oldMediaLength=0;let t=document.querySelector(".grid");t.style.height=0,this.$refs.mediaList.noMore=!1,this.$refs.mediaList.loadingTop="0px",this.$store.dispatch("setTotalResult",null),this.$refs.mediaList.loadMore()}},watch:{currentColor(){this.isHex()?this.hexBgColor="#"+this.currentColor:this.hexBgColor=""},isPhoto(){this.reload()},searchQuery(){this.reload()}}},Wt=Gt,Xt=(s("9435"),Object(h["a"])(Wt,Ut,Qt,!1,null,null,null)),Jt=Xt.exports,Zt=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"container-fluid px-3 px-lg-5 pt-7"},[e("div",{staticClass:"d-flex flex-column align-items-center"},[e("h1",{},[t._v("我的收藏")]),e("span",{staticClass:"w-100 fs-3 py-5 mb-5 border-bottom text-center"},[t._v(" 項目 "+t._s(Object.keys(t.collections).length)+" ")])]),e("div",{staticClass:"thumbnail-list d-flex flex-wrap mn-xl-3 mn-2"},t._l(t.collections,(function(s,i){return e("div",{key:i,staticClass:"collection-container col-xxl-3 col-lg-4 col-sm-6 col-12 p-xl-3 p-2 mb-3"},[e("router-link",{attrs:{to:{path:"collections/"+s.id}}},[e("div",{staticClass:"collection-placeholder"},[s.media?e("ul",{staticClass:"collection-grid-container overflow-hidden rounded-4",class:t.setGridLayout(s.media)},t._l(t.getMediaArray(s.media).slice(0,3),(function(i,o){return e("li",{key:o,staticClass:"collection-image overflow-hidden",class:t.setGridSpace(s.media,o)},[i.video_files?i.video_files?e("img",{staticClass:"h-100 w-100",staticStyle:{"object-fit":"cover"},attrs:{src:i.image,alt:""}}):t._e():e("img",{staticClass:"h-100 w-100",staticStyle:{"object-fit":"cover"},attrs:{src:i.src.large,alt:""}}),e("div",{staticClass:"overlay bg-dark"})])})),0):e("div",{staticClass:"none-image rounded-4"})]),e("div",{staticClass:"collection-details d-flex justify-content-between align-items-center fs-5 fw-normal mt-2"},[e("div",{staticClass:"name"},[t._v(t._s(s.title))]),e("div",{staticClass:"number d-flex align-items-center"},[e("span",{staticClass:"me-2"},[t._v(t._s(t.getMediaArray(s.media).length))]),e("i",{staticClass:"ri-image-2-fill fs-4"})])])])],1)})),0),0===t.collections.length?e("p",[t._v("目前尚未收藏任何相片及影片。")]):t._e()]),e("loading",{attrs:{active:t.isLoading,opacity:1,"z-index":0},on:{"update:active":function(e){t.isLoading=e}}},[e("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])],1)},Kt=[],Yt={name:"Collections",computed:{...Object(r["b"])(["collections"])},data(){return{isLoading:!0}},methods:{setGridLayout(t){if(t){const e=Object.values(t).length;if(e>=3)return"collection-grid-container-rows"}},setGridSpace(t,e){const s=this.getMediaArray(t).slice(0,3).length;return 1==s?"collection-image-full-width":3==s&&0==e?"collection-image-full-height":void 0},getMediaArray(t){return t?Object.values(t):[]}},watch:{collections(){this.isLoading=!1}},mounted(){this.$store.dispatch("getCollections")}},te=Yt,ee=(s("3f6e"),Object(h["a"])(te,Zt,Kt,!1,null,"6a6c99be",null)),se=ee.exports,ie=function(){var t=this,e=t._self._c;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"container-fluid px-3 px-lg-5 pt-7"},[e("div",{staticClass:"mb-5"},[e("div",{staticClass:"position-relative d-flex flex-wrap justify-content-center w-100"},[e("p",{staticClass:"title col-12 text-center mb-lg-0 mb-4 fs-1"},[t._v(t._s(t.collection.title))]),t.isFeatured?t._e():e("div",{staticClass:"position-lg-absolute d-flex justify-content-center align-items-center end-0 w-100 w-lg-auto h-100"},[e("button",{staticClass:"border border-1 text-primary rounded-4 px-3 py-2 me-3 d-flex align-items-center",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#collectionModalEdit"}},[e("i",{staticClass:"svg-icon d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M6.414 16L16.556 5.858l-1.414-1.414L5 14.586V16h1.414zm.829 2H3v-4.243L14.435 2.322a1 1 0 0 1 1.414 0l2.829 2.829a1 1 0 0 1 0 1.414L7.243 18zM3 20h18v2H3v-2z"}})])]),e("span",{staticClass:"ps-1"},[t._v("編輯")])]),e("button",{staticClass:"border border-1 text-primary rounded-4 px-3 py-2 d-flex align-items-center",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#collectionModaDelete"}},[e("i",{staticClass:"svg-icon d-flex align-items-center"},[e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"}},[e("path",{attrs:{fill:"none",d:"M0 0h24v24H0z"}}),e("path",{attrs:{d:"M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3zm1 2H6v12h12V8zm-9 3h2v6H9v-6zm4 0h2v6h-2v-6zM9 4v2h6V4H9z"}})])]),e("span",{staticClass:"ps-1"},[t._v("刪除")])])])]),e("p",{staticClass:"text-center mt-3 fs-5"},[t._v(t._s(t.collection.description))])]),e("CollectionModalEdit",{attrs:{collection:t.collection}}),e("CollectionModaDelete",{attrs:{collection:t.collection}}),e("MediaList",{ref:"mediaList",on:{getMedia:t.getMedia}})],1),e("loading",{attrs:{active:t.isLoading,"z-index":0,opacity:1},on:{"update:active":function(e){t.isLoading=e}}},[e("div",{staticClass:"spinner-border text-secondary",attrs:{role:"status"}})])],1)},oe=[],ae=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal center-modal fade rounded-4",attrs:{id:"collectionModalEdit",tabindex:"-1","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-scrollable",staticStyle:{"min-width":"30%"}},[e("div",{staticClass:"modal-content rounded-4"},[e("div",{staticClass:"p-5"},[t._m(0),e("button",{staticClass:"btn-close position-absolute top-0 end-0 m-3",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}}),e("form",{staticClass:"needs-validation",attrs:{target:"stop-reload"}},[e("div",{staticClass:"mb-3"},[e("label",{staticClass:"form-label",attrs:{for:"collectionTitle"}},[t._v("標題")]),e("input",{staticClass:"form-control shadow-none",attrs:{type:"text",id:"collectionTitle",required:""},domProps:{value:t.collection.title}})]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"form-label",attrs:{for:"descriptionTextarea"}},[t._v("說明")]),e("textarea",{staticClass:"form-control shadow-none",attrs:{id:"descriptionTextarea",rows:"3"},domProps:{value:t.collection.description}})]),e("div",{staticClass:"gap-3 d-flex justify-content-end"},[e("button",{staticClass:"btn btn-secondary text-white me-md-2",attrs:{ype:"submit"},on:{click:t.editCollection}},[t._v(" 更新收藏 ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[t._v(" 關閉收藏 ")])])]),e("iframe",{staticStyle:{display:"none"},attrs:{name:"stop-reload"}})])])])])},le=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column align-items-center"},[e("h5",{staticClass:"modal-title text-center mb-4",attrs:{id:"exampleModalLabel"}},[t._v("編輯收藏")])])}],ne={name:"CollectionModalEdit",props:{collection:{Object:Object}},data(){return{modal:null}},methods:{modalObject(){this.modal=new H["b"](document.getElementById("collectionModalEdit"))},editCollection(){const t=Object(d["c"])(),e="collections/"+this.collection.id,s=document.getElementById("collectionTitle").value,i=document.getElementById("descriptionTextarea").value;s&&(Object(d["h"])(Object(d["f"])(t),{[e+"/title"]:s}),Object(d["h"])(Object(d["f"])(t),{[e+"/description"]:i}),this.$store.state.collection.title=s,this.$store.state.collection.description=i,this.modal.hide())}},mounted(){this.modalObject()}},re=ne,de=(s("505b"),Object(h["a"])(re,ae,le,!1,null,"1c83bebf",null)),ce=de.exports,ue=function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal center-modal fade rounded-4",attrs:{id:"collectionModaDelete",tabindex:"-1","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-sm modal-dialog-scrollable"},[e("div",{staticClass:"modal-content rounded-4"},[e("div",{staticClass:"p-5"},[t._m(0),e("button",{staticClass:"btn-close position-absolute top-0 end-0 m-3",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}}),e("div",{staticClass:"gap-3 d-flex justify-content-center"},[e("button",{staticClass:"btn btn-secondary text-white me-md-2",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"},on:{click:t.deleteCollection}},[t._v(" 確定 ")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[t._v(" 取消 ")])])])])])])},he=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex flex-column align-items-center"},[e("h5",{staticClass:"modal-title text-center mb-4"},[t._v("確定要刪除收藏嗎?")])])}],me={name:"CollectionModaDelete",props:{collection:{Object:Object}},methods:{deleteCollection(){const t=Object(d["c"])();Object(d["g"])(Object(d["f"])(t,"collections/"+this.collection.id)),this.$router.replace("/collections")}}},pe=me,ve=Object(h["a"])(pe,ue,he,!1,null,null,null),be=ve.exports,fe={name:"Collection",components:{MediaList:It,CollectionModalEdit:ce,CollectionModaDelete:be},computed:{...Object(r["b"])(["collection","featuredCollections"]),id(){return this.$route.params.id},isFeatured(){return this.$route.meta.isFeatured}},data(){return{isLoading:!0,page:0}},methods:{getMedia(){if(this.page++,this.isFeatured){const t=this.featuredCollections.find(t=>t.id===this.id);this.$store.dispatch("getCollectionPexel",{id:this.id,page:this.page,collection:t})}else this.$store.dispatch("getCollectionFirebase",this.id);this.isLoading=!1},resetData(){const t=document.querySelector(".grid");t.style.height=0,this.page=0,this.$store.state.media=[],this.$store.state.totalResult=null,this.$refs.mediaList.noMore=!1,this.$refs.mediaList.loadMore()}},watch:{id(){this.resetData()}},mounted(){this.$store.dispatch("getCollections")}},ge=fe,Ce=(s("a0b5"),Object(h["a"])(ge,ie,oe,!1,null,"11e948fc",null)),we=Ce.exports;i["a"].use(E["a"]);var xe=new E["a"]({routes:[{path:"/",redirect:"/photos"},{path:"/photos",component:Ht},{path:"/videos",component:Nt},{path:"/search/:query",component:Jt},{path:"/search/video/:query",component:Jt},{path:"/collections",component:se},{path:"/collections/:id",component:we},{path:"/collections/featured/:id",component:we,meta:{isFeatured:!0}}]});function ye(t="",e={}){return new Promise((s,i)=>{let o="";Object.keys(e).forEach(t=>{e[t]&&(o+=t+"="+e[t]+"&")}),""!==o&&(o=o.substring(0,o.lastIndexOf("&")),t=t+"?"+o),k()({method:"get",url:t,headers:{Authorization:"563492ad6f917000010000013c632f2578244bb3a86a6da7c961215c"}}).then(t=>{s(t)}).catch(t=>{i(t)})}).catch(t=>t)}const _e="https://api.pexels.com",Me=t=>ye(_e+"/v1/curated",t),Ee=t=>ye(_e+"/videos/popular",t),Oe=({page:t,query:e,orientation:s,size:i,color:o})=>ye(_e+"/v1/search",{page:t,query:e,orientation:s,size:i,color:o}),je=({page:t,query:e,orientation:s,size:i})=>ye(_e+"/videos/search",{page:t,query:e,orientation:s,size:i}),ze=(t,e)=>ye(_e+"/v1/collections/"+t,{page:e}),Se=({page:t,per_page:e})=>ye(_e+"/v1/collections/featured",{page:t,per_page:e});var Le={async getFeaturedPhotos(t,e){const s=await Me(e);t.commit("RECEIVE_FEARTUREDPHOTOS",s)},async getFeaturedVideos(t,e){const s=await Ee(e);t.commit("RECEIVE_FEARTUREDVIDEOS",s)},async getFeaturedCollections(t,e){const s=await Se(e),i=s.data.collections;t.commit("RECEIVE_FEATUREDCOLLECTIONS",i)},async getSearchPhotos(t,e){const s=await Oe(e);t.commit("RECEIVE_SEARCHPHOTOS",s)},async getSearchVideos(t,e){const s=await je(e);t.commit("RECEIVE_SEARCHVIDEOS",s)},async getCollectionPexel(t,{id:e,page:s,collection:i}){const o=await ze(e,s);t.commit("RECEIVE_COLLECTION_PEXEL",{result:o.data,collection:i})},getCover(t,{id:e,path:s}){const i=Object(d["f"])(Object(d["c"])());Object(d["b"])(Object(d["a"])(i,s+"/"+e)).then(e=>{e.exists()&&("photoCovers"===s?t.commit("RECEIVE_PHOTOCOVER",e.val()):t.commit("RECEIVE_VIDEOCOVER",e.val()))}).catch(t=>{console.error(t)})},getSearchRecords(t){const e=Object(d["c"])(),s=Object(d["f"])(e,"searchRecords");Object(d["d"])(s,e=>{e.exists()?t.commit("RECEIVE_SEARCHRECORDS",e.val()):t.commit("RECEIVE_SEARCHRECORDS",[])})},getCollections(t){const e=Object(d["c"])(),s=Object(d["f"])(e,"collections");Object(d["d"])(s,e=>{if(e.exists()){const s=Object.values(e.val()).reverse();t.commit("RECEIVE_COLLECTIONS",s)}else t.commit("RECEIVE_COLLECTIONS",[])})},getCollectionFirebase(t,e){const s=Object(d["f"])(Object(d["c"])());Object(d["b"])(Object(d["a"])(s,"collections/"+e)).then(e=>{if(e.exists()){const s=e.val();t.commit("RECEIVE_COLLECTION_FIREBASE",s)}}).catch(t=>{console.error(t)})},setColletion(t,e){t.commit("NEW_COLLECTION",e)},setMedium(t,e){t.commit("SET_MEDIUM",e)},setTotalResult(t,e){t.commit("SET_TOTALRESULT",e)}},ke={RECEIVE_FEARTUREDPHOTOS(t,e){e.status?(t.newMedia=e.data.photos,t.page=e.data.page,t.totalResult=e.data.total_results,t.isOverLimitRequest=!1,t.isRequestError=!1):429==e.response.status?t.isOverLimitRequest=!0:t.isRequestError=!0},RECEIVE_FEARTUREDVIDEOS(t,e){e.status?(t.newMedia=e.data.videos,t.page=e.data.page,t.totalResult=e.data.total_results,t.isOverLimitRequest=!1,t.isRequestError=!1):429==e.response.status?t.isOverLimitRequest=!0:t.isRequestError=!0},RECEIVE_SEARCHPHOTOS(t,e){e.status?(t.newMedia=e.data.photos,t.page=e.data.page,t.totalResult=e.data.total_results):429==e.response.status?t.isOverLimitRequest=!0:t.isRequestError=!0},RECEIVE_SEARCHVIDEOS(t,e){e.status?(t.newMedia=e.data.videos,t.page=e.data.page,t.totalResult=e.data.total_results):429==e.response.status?t.isOverLimitRequest=!0:t.isRequestError=!0},RECEIVE_FEATUREDCOLLECTIONS(t,e){t.featuredCollections=e},RECEIVE_COLLECTION_PEXEL(t,{result:e,collection:s}){t.collection=s,t.newMedia=e.media,t.totalResult=e.total_results},RECEIVE_COLLECTIONS(t,e){t.collections=e},RECEIVE_COLLECTION_FIREBASE(t,e){t.collection=e,e.media?(t.newMedia=Object.values(e.media).reverse(),t.totalResult=Object.values(e.media).length):(t.newMedia=[],t.totalResult=0)},RECEIVE_SEARCHRECORDS(t,e){t.searchRecords=e},RECEIVE_PHOTOCOVER(t,e){t.photoCover=e},RECEIVE_VIDEOCOVER(t,e){t.videoCover=e},NEW_COLLECTION(t,e){t.collection=e},SET_MEDIUM(t,e){t.medium=e},SET_TOTALRESULT(t,e){t.totalResult=e}},Re={page:"",totalResult:null,newMedia:[],media:[],medium:{},collections:[],collection:{},searchValue:"",searchRecords:[],featuredCollections:[],photoCover:"",videoCover:"",isOverLimitRequest:!1,isRequestError:!1};i["a"].use(r["a"]);var Ve=new r["a"].Store({actions:Le,mutations:ke,state:Re}),Ie=s("9062"),Ae=s.n(Ie),Te=(s("e40d"),s("487a")),Be=s.n(Te),He=s("bc7b");i["a"].config.productionTip=!1;const $e={apiKey:"AIzaSyBbUhwFunt876lfxo3pqV4WWlDBeBP1hGU",authDomain:"photoshare-15d83.firebaseapp.com",databaseURL:"https://photoshare-15d83-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"photoshare-15d83",storageBucket:"photoshare-15d83.appspot.com",messagingSenderId:"93747106897",appId:"1:93747106897:web:7411a06d7d865904da1470"};Object(He["a"])($e),i["a"].use(Be.a),i["a"].component("loading",Ae.a),xe.afterEach(()=>{window.scrollTo(0,0)}),new i["a"]({store:Ve,router:xe,render:t=>t(M)}).$mount("#app")},"5f1f":function(t,e,s){"use strict";s("2904")},"6ec8":function(t,e,s){"use strict";s("df91")},"7cfa":function(t,e,s){},"852e":function(t,e,s){},"88d7":function(t,e,s){"use strict";s("0f00")},"8caa":function(t,e,s){},9435:function(t,e,s){"use strict";s("040e")},a0b5:function(t,e,s){"use strict";s("d305")},a53f:function(t,e,s){"use strict";s("5281")},a76b:function(t,e,s){},ade1:function(t,e,s){},b6ed:function(t,e,s){"use strict";s("852e")},be63:function(t,e,s){"use strict";s("20fd")},d305:function(t,e,s){},df91:function(t,e,s){},f096:function(t,e,s){"use strict";s("a76b")},f789:function(t,e,s){},fc56:function(t,e,s){"use strict";s("ade1")}});
//# sourceMappingURL=app.9c9c98a0.js.map